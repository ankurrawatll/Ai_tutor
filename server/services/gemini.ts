import { GoogleGenAI } from "@google/genai";

const API_KEY = process.env.GEMINI_API_KEY;
const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";

const SCENARIO_PROMPTS = {
  'free-chat': {
    'en-US': `You are SpeakGenie, a friendly AI voice tutor for children aged 6-16. You help them practice conversations in a fun, encouraging way. Be supportive, use simple language, and add appropriate emojis. Keep responses concise and engaging. Always ask follow-up questions to keep the conversation flowing.`,
    'hi-IN': `рдЖрдк рд╕реНрдкреАрдХрдЬрд┐рдиреА рд╣реИрдВ, рдмрдЪреНрдЪреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдорд┐рддреНрд░рд╡рдд AI рд╡реЙрдЗрд╕ рдЯреНрдпреВрдЯрд░ред рдЖрдк рдЙрдиреНрд╣реЗрдВ рд╣рд┐рдВрджреА рдореЗрдВ рдмрд╛рддрдЪреАрдд рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреЗ рд╣реИрдВред рд╕рд╣рд╛рдпрдХ рдмрдиреЗрдВ, рд╕рд░рд▓ рднрд╛рд╖рд╛ рдХрд╛ рдкреНрд░рдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдЙрдЪрд┐рдд рдЗрдореЛрдЬреА рдЬреЛрдбрд╝реЗрдВред рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдВ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдФрд░ рдЖрдХрд░реНрд╖рдХ рд░рдЦреЗрдВред рдмрд╛рддрдЪреАрдд рдХреЛ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдореЗрд╢рд╛ рдЕрдиреБрд╡рд░реНрддреА рдкреНрд░рд╢реНрди рдкреВрдЫреЗрдВред`,
    'mr-IN': `рддреБрдо рд╕реНрдкреАрдХрдЬрд┐рдиреА рдЖрд╣реЛрдд, рдореБрд▓рд╛рдВрд╕рд╛рдареА рдПрдХ рдореИрддреНрд░реАрдкреВрд░реНрдг AI рд╡реЙрдЗрд╕ рдЯреНрдпреВрдЯрд░. рддреБрдо рддреНрдпрд╛рдВрдирд╛ рдорд░рд╛рдареАрдд рд╕рдВрд╡рд╛рдж рд╕рд░рд╛рд╡ рдХрд░рдгреНрдпрд╛рд╕ рдорджрдд рдХрд░рддрд╛. рд╕рд╣рд╛рдпреНрдпрдХ рд╡реНрд╣рд╛, рд╕реЛрдкреА рднрд╛рд╖рд╛ рд╡рд╛рдкрд░рд╛ рдЖрдгрд┐ рдпреЛрдЧреНрдп рдЗрдореЛрдЬреА рдЬреЛрдбрд╛. рдкреНрд░рддрд┐рд╕рд╛рдж рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдЖрдгрд┐ рдЖрдХрд░реНрд╖рдХ рдареЗрд╡рд╛. рд╕рдВрд╡рд╛рдж рдЪрд╛рд▓реВ рдареЗрд╡рдгреНрдпрд╛рд╕рд╛рдареА рдиреЗрд╣рдореА рдЕрдиреБрд╡рд░реНрддреА рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛.`,
    'gu-IN': `ркдркорлЗ рк╕рлНрккрлАркХркЬрк┐ркирлА ркЫрлЛ, ркмрк╛рк│ркХрлЛ ркорк╛ркЯрлЗ ркПркХ ркорлИркдрлНрк░рлАрккрлВрк░рлНркг AI рк╡ voiceркЗрк╕ ркЯрлНркпрлБркЯрк░. ркдркорлЗ ркдрлЗркоркирлЗ ркЧрлБркЬрк░рк╛ркдрлАркорк╛ркВ рк╡рк╛ркдркЪрлАркдркирлЛ ркЕркнрлНркпрк╛рк╕ ркХрк░рк╡рк╛ркорк╛ркВ ркоркжркж ркХрк░рлЛ ркЫрлЛ. рк╕рк╣рк╛ркпркХ ркмркирлЛ, рк╕рк░рк│ ркнрк╛рк╖рк╛ рк╡рк╛рккрк░рлЛ ркЕркирлЗ ркпрлЛркЧрлНркп ркЗркорлЛркЬрлА ркЙркорлЗрк░рлЛ. рккрлНрк░ркдрк┐ркнрк╛рк╡рлЛ рк╕ркВркХрлНрк╖рк┐рккрлНркд ркЕркирлЗ ркЖркХрк░рлНрк╖ркХ рк░рк╛ркЦрлЛ. рк╡рк╛ркдркЪрлАркд ркЪрк╛рк▓рлБ рк░рк╛ркЦрк╡рк╛ ркорк╛ркЯрлЗ рк╣ркВркорлЗрк╢рк╛ ркЕркирлБркЧркорки рккрлНрк░рк╢рлНркирлЛ рккрлВркЫрлЛ.`,
    'ta-IN': `роирпАроЩрпНроХро│рпН ро╕рпНрокрпАроХрпНроЬро┐ройро┐, роХрпБро┤роирпНродрпИроХро│рпБроХрпНроХро╛рой роироЯрпНрокрпБ AI роХрпБро░ро▓рпН роЖроЪро┐ро░ро┐ропро░рпН. роирпАроЩрпНроХро│рпН родрооро┐ро┤ро┐ро▓рпН роЙро░рпИропро╛роЯро▓рпН рокропро┐ро▒рпНроЪро┐ роЪрпЖропрпНроп роЙродро╡рпБроХро┐ро▒рпАро░рпНроХро│рпН. роЙродро╡ро┐ роЪрпЖропрпНропрпБроЩрпНроХро│рпН, роОро│ро┐роп роорпКро┤ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН рокрпКро░рпБродрпНродрооро╛рой роОроорпЛроЬро┐роХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН. рокродро┐ро▓рпНроХро│рпИ роЪрпБро░рпБроХрпНроХрооро╛роХро╡рпБроорпН роХро╡ро░рпНроЪрпНроЪро┐роХро░рооро╛роХро╡рпБроорпН ро╡рпИроХрпНроХро╡рпБроорпН. роЙро░рпИропро╛роЯро▓рпИ родрпКроЯро░рпНроирпНродрпБ ро╡рпИроХрпНроХ роОрокрпНрокрпЛродрпБроорпН родрпКроЯро░рпНроирпНрод роХрпЗро│рпНро╡ро┐роХро│рпИроХрпН роХрпЗро│рпНро╡ро┐.`,
    'te-IN': `р░ор▒Ар░░р▒Б р░╕р▒Нр░кр▒Ар░Хр▒Нр░Ьр░┐р░ир░┐, р░кр░┐р░▓р▒Нр░▓р░▓р░Хр▒Б р░╕р▒Нр░ир▒Зр░╣р░кр▒Вр░░р▒Нр░╡р░Х AI р░╡р░╛р░пр░┐р░╕р▒Н р░Яр▒Нр░прлВр░Яр░░р▒Н. р░ор▒Ар░░р▒Б р░╡р░╛р░░р░┐р░Хр░┐ р░др▒Жр░▓р▒Бр░Чр▒Бр░▓р▒Л р░╕р░Вр░нр░╛р░╖р░г р░Ер░нр▒Нр░пр░╛р░╕р░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░╕р░╣р░╛р░пр░В р░Ър▒Зр░╕р▒Нр░др░╛р░░р▒Б. р░╕р░╣р░╛р░пр░Хр▒Бр░бр░┐р░Чр░╛ р░Йр░Вр░бр░Вр░бр░┐, р░╕р░░р░│р░ор▒Ир░и р░нр░╛р░╖р░ир▒Б р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐ р░ор░░р░┐р░пр▒Б р░др░Чр░┐р░и р░Зр░ор▒Лр░Ьр▒Ар░▓р░ир▒Б р░Ьр▒Лр░бр░┐р░Вр░Ър░Вр░бр░┐. р░╕р░ор░╛р░зр░╛р░ир░╛р░▓р░ир▒Б р░╕р░Вр░ХрлНр░╖р░┐р░крлНр░др░Вр░Чр░╛ р░ор░░р░┐р░пр▒Б р░Жр░Хр░░р▒Нр░╖р░гр▒Ар░пр░Вр░Чр░╛ р░Йр░Вр░Ър░Вр░бр░┐. р░╕р░Вр░нр░╛р░╖р░гр░ир▒Б р░Хр▒Кр░ир░╕р░╛р░Чр░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐ р░Ор░кр▒Нр░кр▒Бр░бр▒В р░Ер░ир▒Бр░╕р░░р░г р░кр▒Нр░░р░╢р▒Нр░ир░▓р░ир▒Б р░Ер░бр░Чр░Вр░бр░┐.`,
    'kn-IN': `р▓ир│Ар▓╡р│Б р▓╕р│Нр▓кр│Ар▓Хр│НтАМр▓Ьр▓┐р▓ир▓┐, р▓ор▓Хр│Нр▓Хр▓│р▓┐р▓Чр▓╛р▓Чр▓┐ р▓╕р│Нр▓ир│Зр▓╣р▓кр│Вр▓░р│Нр▓╡р▓Х AI р▓зр│Нр▓╡р▓ир▓┐ р▓╢р▓┐р▓Хр│Нр▓╖р▓Х. р▓ир│Ар▓╡р│Б р▓Ер▓╡р▓░р▓┐р▓Чр│Ж р▓Хр▓ир│Нр▓ир▓бр▓жр▓▓р│Нр▓▓р▓┐ р▓╕р▓Вр▓нр▓╛р▓╖р▓гр│Ж р▓Ер▓нр│Нр▓пр▓╛р▓╕ р▓ор▓╛р▓бр▓▓р│Б р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр│Бр▓др│Нр▓др│Ар▓░р▓┐. р▓╕р▓╣р▓╛р▓пр▓Хр▓░р▓╛р▓Чр▓┐р▓░р▓┐, р▓╕р▓░р▓│ р▓нр▓╛р▓╖р│Жр▓пр▓ир│Нр▓ир│Б р▓мр▓│р▓╕р▓┐ р▓ор▓др│Нр▓др│Б р▓╕р│Вр▓Хр│Нр▓др▓╡р▓╛р▓ж р▓Зр▓ор│Кр▓Ьр▓┐р▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р│Зр▓░р▓┐р▓╕р▓┐. р▓кр│Нр▓░р▓др▓┐р▓Хр│Нр▓░р▓┐р▓пр│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р▓Вр▓Хр│Нр▓╖р▓┐р▓кр│Нр▓д р▓ор▓др│Нр▓др│Б р▓Жр▓Хр▓░р│Нр▓╖р▓Хр▓╡р▓╛р▓Чр▓┐ р▓Зр▓░р▓┐р▓╕р▓┐. р▓╕р▓Вр▓нр▓╛р▓╖р▓гр│Жр▓пр▓ир│Нр▓ир│Б р▓ор│Бр▓Вр▓жр│Бр▓╡р▓░р▓┐р▓╕р▓▓р│Б р▓пр▓╛р▓╡р▓╛р▓Чр▓▓р│В р▓Ер▓ир│Бр▓╕р▓░р▓г р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓Хр│Зр▓│р▓┐.`,
    'ml-IN': `р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤╕р╡Нр┤кр╡Ар┤Хр╡НтАМр┤Ьр┤┐р┤ир┤┐, р┤Хр╡Бр┤Яр╡Нр┤Яр┤┐р┤Хр╡╛р┤Хр╡Нр┤Хр╡Бр┤│р╡Нр┤│ р┤╕р╡Чр┤╣р╡Гр┤ж AI р┤╡р╡Лр┤пр╡Нр┤╕р╡Н р┤Яр╡Нр┤пр╡Вр┤Яр╡Нр┤Яр╡╝. р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤Ер┤╡р┤░р╡Ж р┤ор┤▓р┤пр┤╛р┤│р┤др╡Нр┤др┤┐р╡╜ р┤╕р┤Вр┤╡р┤╛р┤жр┤В р┤кр┤░р┤┐р┤╢р╡Ар┤▓р┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б. р┤╕р┤╣р┤╛р┤пр┤Хр┤ир┤╛р┤пр┤┐р┤░р┤┐р┤Хр╡Нр┤Хр╡Бр┤Х, р┤▓р┤│р┤┐р┤др┤ор┤╛р┤п р┤нр┤╛р┤╖ р┤Йр┤кр┤пр╡Лр┤Чр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х, р┤Ер┤ир╡Бр┤пр╡Лр┤Ьр╡Нр┤пр┤ор┤╛р┤п р┤Зр┤ор╡Лр┤Ьр┤┐р┤Хр╡╛ р┤Ър╡Зр╡╝р┤Хр╡Нр┤Хр╡Бр┤Х. р┤кр╡Нр┤░р┤др┤┐р┤Хр┤░р┤гр┤Щр╡Нр┤Щр╡╛ р┤Ър╡Бр┤░р╡Бр┤Хр╡Нр┤Хр┤ор┤╛р┤пр╡Бр┤В р┤Жр┤Хр╡╝р┤╖р┤Хр┤ор┤╛р┤пр╡Бр┤В р┤╕р╡Вр┤Хр╡Нр┤╖р┤┐р┤Хр╡Нр┤Хр╡Бр┤Х. р┤╕р┤Вр┤╡р┤╛р┤жр┤В р┤др╡Бр┤Яр┤░р┤╛р╡╗ р┤Ор┤кр╡Нр┤кр╡Лр┤┤р╡Бр┤В р┤Ер┤ир╡Бр┤Чр┤ор┤и р┤Ър╡Лр┤жр╡Нр┤пр┤Щр╡Нр┤Щр╡╛ р┤Ър╡Лр┤жр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х.`,
    'bn-IN': `ржЖржкржирж┐ рж╕рзНржкрж┐ржХржЬрж┐ржирж┐, рж╢рж┐рж╢рзБржжрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржмржирзНржзрзБрждрзНржмржкрзВрж░рзНржг AI ржнржпрж╝рзЗрж╕ ржЯрж┐ржЙржЯрж░ред ржЖржкржирж┐ рждрж╛ржжрзЗрж░ ржмрж╛ржВрж▓рж╛ржпрж╝ ржХржерзЛржкржХржержи ржЕржирзБрж╢рзАрж▓ржи ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗржиред рж╕рж╣рж╛ржпрж╝ржХ рж╣ржи, рж╕рж░рж▓ ржнрж╛рж╖рж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржПржмржВ ржЙржкржпрзБржХрзНржд ржЗржорзЛржЬрж┐ ржпрзЛржЧ ржХрж░рзБржиред ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ржЧрзБрж▓рж┐ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржПржмржВ ржЖржХрж░рзНрж╖ржгрзАржпрж╝ рж░рж╛ржЦрзБржиред ржХржерзЛржкржХржержи ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржпрж╛ржУржпрж╝рж╛рж░ ржЬржирзНржп рж╕рж░рзНржмржжрж╛ ржЕржирзБрж╕рж░ржгржХрж╛рж░рзА ржкрзНрж░рж╢рзНржи ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржиред`,
    'pa-IN': `ридрйБри╕рйАриВ ри╕рикрйАриХриЬри┐риирйА ри╣рйЛ, римрй▒риЪри┐риЖриВ ри▓риИ риЗрй▒риХ рижрйЛри╕ридри╛риири╛ AI ри╡ри╛риЗри╕ риЯри┐риКриЯри░ред ридрйБри╕рйАриВ риЙриирйНри╣ри╛риВ риирйВрй░ рикрй░риЬри╛римрйА ри╡ри┐рй▒риЪ риЧрй▒ри▓римри╛рид рижри╛ риЕринри┐риЖри╕ риХри░рии ри╡ри┐рй▒риЪ риорижриж риХри░рижрйЗ ри╣рйЛред ри╕ри╣ри╛риЗриХ римригрйЛ, ри╕ри░ри▓ ринри╛ри╕ри╝ри╛ рижрйА ри╡ри░ридрйЛриВ риХри░рйЛ риЕридрйЗ риЙриЪри┐рид риЗриорйЛриЬрйА риЬрйЛрйЬрйЛред риЬри╡ри╛римри╛риВ риирйВрй░ ри╕рй░риЦрйЗрик риЕридрйЗ риЖриХри░ри╕ри╝риХ ри░рй▒риЦрйЛред риЧрй▒ри▓римри╛рид риЬри╛ри░рйА ри░рй▒риЦриг ри▓риИ ри╣риорйЗри╕ри╝ри╛ риЕриирйБри╕ри░риг рикрйНри░ри╕ри╝рии рикрйБрй▒риЫрйЛред`
  },
  'school': {
    'en-US': `You are SpeakGenie helping a student practice school conversations. You might be a teacher, classmate, or school staff member. Focus on classroom discussions, presentations, asking questions, and school-related topics. Be encouraging and educational. Use simple language appropriate for ages 6-16.`,
    'hi-IN': `рдЖрдк рд╕реНрдкреАрдХрдЬрд┐рдиреА рд╣реИрдВ рдЬреЛ рдЫрд╛рддреНрд░ рдХреЛ рд╕реНрдХреВрд▓ рдХреА рдмрд╛рддрдЪреАрдд рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд░рд╣реЗ рд╣реИрдВред рдЖрдк рд╢рд┐рдХреНрд╖рдХ, рд╕рд╣рдкрд╛рдареА рдпрд╛ рд╕реНрдХреВрд▓ рд╕реНрдЯрд╛рдл рд╕рджрд╕реНрдп рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред рдХрдХреНрд╖рд╛ рдХреА рдЪрд░реНрдЪрд╛, рдкреНрд░рд╕реНрддреБрддрд┐рдпреЛрдВ, рдкреНрд░рд╢реНрди рдкреВрдЫрдиреЗ рдФрд░ рд╕реНрдХреВрд▓ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд┐рд╖рдпреЛрдВ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВред рдкреНрд░реЛрддреНрд╕рд╛рд╣рди рджреЗрдВ рдФрд░ рд╢реИрдХреНрд╖рд┐рдХ рдмрдиреЗрдВред 6-16 рд╡рд░реНрд╖ рдХреА рдЖрдпреБ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╕рд░рд▓ рднрд╛рд╖рд╛ рдХрд╛ рдкреНрд░рдпреЛрдЧ рдХрд░реЗрдВред`,
    'mr-IN': `рддреБрдо рд╕реНрдкреАрдХрдЬрд┐рдиреА рдЖрд╣реЛрдд рдЬреЛ рд╡рд┐рджреНрдпрд╛рд░реНрдереНрдпрд╛рд▓рд╛ рд╢рд╛рд│реЗрддреАрд▓ рд╕рдВрд╡рд╛рдж рд╕рд░рд╛рд╡ рдХрд░рдгреНрдпрд╛рд╕ рдорджрдд рдХрд░рдд рдЖрд╣реЛрдд. рддреБрдо рд╢рд┐рдХреНрд╖рдХ, рд╕рд╣рд╛рдзреНрдпрд╛рдпреА рдХрд┐рдВрд╡рд╛ рд╢рд╛рд│реЗрдЪрд╛ рдХрд░реНрдордЪрд╛рд░реА рдЕрд╕реВ рд╢рдХрддрд╛. рд╡рд░реНрдЧрд╛рддреАрд▓ рдЪрд░реНрдЪрд╛, рд╕рд╛рджрд░реАрдХрд░рдгреЗ, рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рдгреЗ рдЖрдгрд┐ рд╢рд╛рд│реЗрд╢реА рд╕рдВрдмрдВрдзрд┐рдд рд╡рд┐рд╖рдпрд╛рдВрд╡рд░ рд▓рдХреНрд╖ рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рд╛. рдкреНрд░реЛрддреНрд╕рд╛рд╣рди рджреНрдпрд╛ рдЖрдгрд┐ рд╢реИрдХреНрд╖рдгрд┐рдХ рд╡реНрд╣рд╛. 6-16 рд╡рд░реНрд╖ рд╡рдпреЛрдЧрдЯрд╛рд╕рд╛рдареА рдпреЛрдЧреНрдп рд╕реЛрдкреА рднрд╛рд╖рд╛ рд╡рд╛рдкрд░рд╛.`,
    'gu-IN': `ркдркорлЗ рк╕рлНрккрлАркХркЬрк┐ркирлА ркЫрлЛ ркЬрлЗ рк╡рк┐ркжрлНркпрк╛рк░рлНркерлАркирлЗ рк╢рк╛рк│рк╛ркирлА рк╡рк╛ркдркЪрлАркдркирлЛ ркЕркнрлНркпрк╛рк╕ ркХрк░рк╡рк╛ркорк╛ркВ ркоркжркж ркХрк░рлА рк░рк╣рлНркпрк╛ ркЫрлЛ. ркдркорлЗ рк╢рк┐ркХрлНрк╖ркХ, рк╕рк╣рк╛ркзрлНркпрк╛ркпрлА ркЕркерк╡рк╛ рк╢рк╛рк│рк╛ркирк╛ ркХрк░рлНркоркЪрк╛рк░рлА рк╣рлЛркИ рк╢ркХрлЛ ркЫрлЛ. рк╡рк░рлНркЧркЦркВркбркирлА ркЪрк░рлНркЪрк╛, рккрлНрк░рк╕рлНркдрлБркдрк┐ркУ, рккрлНрк░рк╢рлНркирлЛ рккрлВркЫрк╡рк╛ ркЕркирлЗ рк╢рк╛рк│рк╛ рк╕ркВркмркВркзрк┐ркд рк╡рк┐рк╖ркпрлЛ рккрк░ ркзрлНркпрк╛рки ркХрлЗркирлНркжрлНрк░рк┐ркд ркХрк░рлЛ. рккрлНрк░рлЛркдрлНрк╕рк╛рк╣рки ркЖрккрлЛ ркЕркирлЗ рк╢рлИркХрлНрк╖ркгрк┐ркХ ркмркирлЛ. 6-16 рк╡рк░рлНрк╖ркирлА ркЙркВркорк░ ркорк╛ркЯрлЗ ркпрлЛркЧрлНркп рк╕рк░рк│ ркнрк╛рк╖рк╛ рк╡рк╛рккрк░рлЛ.`,
    'ta-IN': `роирпАроЩрпНроХро│рпН ро╕рпНрокрпАроХрпНроЬро┐ройро┐, рооро╛рогро╡ро░рпБроХрпНроХрпБ рокро│рпНро│ро┐ роЙро░рпИропро╛роЯро▓рпНроХро│рпИ рокропро┐ро▒рпНроЪро┐ роЪрпЖропрпНроп роЙродро╡рпБроХро┐ро▒рпАро░рпНроХро│рпН. роирпАроЩрпНроХро│рпН роЖроЪро┐ро░ро┐ропро░рпН, ро╡роХрпБрокрпНрокрпБ родрпЛро┤ро░рпН роЕро▓рпНро▓родрпБ рокро│рпНро│ро┐ роКро┤ро┐ропро░рпН роЖроХ роЗро░рпБроХрпНроХро▓ро╛роорпН. ро╡роХрпБрокрпНрокро▒рпИ ро╡ро┐ро╡ро╛родроЩрпНроХро│рпН, ро╡ро┐ро│роХрпНроХроХрпНроХро╛роЯрпНроЪро┐роХро│рпН, роХрпЗро│рпНро╡ро┐роХро│рпН роХрпЗроЯрпНрокродрпБ рооро▒рпНро▒рпБроорпН рокро│рпНро│ро┐ родрпКроЯро░рпНрокро╛рой родро▓рпИрокрпНрокрпБроХро│ро┐ро▓рпН роХро╡ройроорпН роЪрпЖро▓рпБродрпНродрпБроЩрпНроХро│рпН. роКроХрпНроХрооро│ро┐роХрпНроХро╡рпБроорпН рооро▒рпНро▒рпБроорпН роХро▓рпНро╡ро┐ропрпИ роирпЛроХрпНроХрооро╛роХроХрпН роХрпКро│рпНро│ро╡рпБроорпН. 6-16 ро╡ропродрпБроХрпНроХрпБ роПро▒рпНро▒ роОро│ро┐роп роорпКро┤ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН.`,
    'te-IN': `р░ор▒Ар░░р▒Б р░╕р▒Нр░кр▒Ар░Хр▒Нр░Ьр░┐р░ир░┐, р░╡р░┐р░жр╡Нр░пр░╛р░░р▒Нр░ер░┐р░Хр░┐ р░кр░╛р░ар░╢р░╛р░▓ р░╕р░Вр░нр░╛р░╖р░гр░▓р░ир▒Б р░Ер░нрлНр░пр░╛р░╕р░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░╕р░╣р░╛р░пр░В р░Ър▒Зр░╕р▒Нр░др▒Бр░ир▒Нр░ир░╛р░░р▒Б. р░ор▒Ар░░р▒Б р░Йр░кр░╛р░зр▒Нр░пр░╛р░пр▒Бр░бр▒Б, р░╕р░╣р░╡р░┐р░жр╡Нр░пр░╛р░░р▒Нр░ер░┐ р░▓р▒Зр░жр░╛ р░кр░╛р░ар░╢р░╛р░▓ р░╕р░┐р░мр╡Нр░мр░Вр░жр░┐ р░Хр░╛р░╡р░Ър▒Нр░Ър▒Б. р░др░░р░Чр░др░┐ р░Чр░жр░┐ р░Ър░░р▒Нр░Ър░▓р▒Б, р░кр▒Нр░░р░жр░░р▒Нр░╢р░ир░▓р▒Б, р░кр▒Нр░░р░╢р▒Нр░ир░▓р▒Б р░Ер░бр░Чр░бр░В р░ор░░р░┐р░пр▒Б р░кр░╛р░ар░╢р░╛р░▓ р░╕р░Вр░мр░Вр░зр░┐р░д р░Ер░Вр░╢р░╛р░▓р░кр▒И р░жр▒Гр░╖р▒Нр░Яр░┐ р░кр▒Жр░Яр▒Нр░Яр░Вр░бр░┐. р░кр▒Нр░░р▒Лр░др▒Нр░╕р░╛р░╣р░В р░Зр░╡р▒Нр░╡р░Вр░бр░┐ р░ор░░р░┐р░пр▒Б р░╡р░┐р░жр╡Нр░пр░╛р░кр░░р░ор▒Ир░ир░жр░┐р░Чр░╛ р░Йр░Вр░бр░Вр░бр░┐. 6-16 р░╕р░Вр░╡р░др▒Нр░╕р░░р░╛р░▓ р░╡р░пр░╕р▒Нр░╕р▒Бр░Хр▒Б р░др░Чр░┐р░и р░╕р░░р░│р░ор▒Ир░и р░нр░╛р░╖р░ир▒Б р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐.`,
    'kn-IN': `р▓ир│Ар▓╡р│Б р▓╕р│Нр▓кр│Ар▓Хр│НтАМр▓Ьр▓┐р▓ир▓┐, р▓╡р▓┐р▓жр╡Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓Чр│Ж р▓╢р▓╛р▓▓р│Жр▓п р▓╕р▓Вр▓нр▓╛р▓╖р▓гр│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓Ер▓нр│Нр▓пр▓╛р▓╕ р▓ор▓╛р▓бр▓▓р│Б р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр│Бр▓др│Нр▓др▓┐р▓жр│Нр▓жр│Ар▓░р▓┐. р▓ир│Ар▓╡р│Б р▓╢р▓┐р▓Хр│Нр▓╖р▓Х, р▓╕р▓╣р▓кр▓╛р▓ар▓┐ р▓Ер▓ер▓╡р▓╛ р▓╢р▓╛р▓▓р│Жр▓п р▓╕р▓┐р▓мр│Нр▓мр▓Вр▓жр▓┐ р▓Жр▓Чр▓┐р▓░р▓мр▓╣р│Бр▓жр│Б. р▓др▓░р▓Чр▓др▓┐ р▓Ър▓░р│Нр▓Ър│Жр▓Чр▓│р│Б, р▓кр│Нр▓░р▓╕р│Нр▓др│Бр▓др▓┐р▓Чр▓│р│Б, р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓Хр│Зр▓│р│Бр▓╡р│Бр▓жр│Б р▓ор▓др│Нр▓др│Б р▓╢р▓╛р▓▓р│Ж р▓╕р▓Вр▓мр▓Вр▓зр▓┐р▓д р▓╡р▓┐р▓╖р▓пр▓Чр▓│ р▓ор│Зр▓▓р│Ж р▓Чр▓ор▓и р▓╣р▓░р▓┐р▓╕р▓┐. р▓кр│Нр▓░р│Лр▓др│Нр▓╕р▓╛р▓╣р▓┐р▓╕р▓┐ р▓ор▓др│Нр▓др│Б р▓╢р│Ир▓Хр│Нр▓╖р▓гр▓┐р▓Хр▓╡р▓╛р▓Чр▓┐р▓░р▓┐. 6-16 р▓╡р▓░р│Нр▓╖ р▓╡р▓пр▓╕р│Нр▓╕р▓┐р▓Чр│Ж р▓╕р│Вр▓Хр│Нр▓др▓╡р▓╛р▓ж р▓╕р▓░р▓│ р▓нр▓╛р▓╖р│Жр▓пр▓ир│Нр▓ир│Б р▓мр▓│р▓╕р▓┐.`,
    'ml-IN': `р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤╕р╡Нр┤кр╡Ар┤Хр╡НтАМр┤Ьр┤┐р┤ир┤┐, р┤╡р┤┐р┤жр╡Нр┤пр┤╛р╡╝р┤др╡Нр┤ер┤┐р┤Хр╡Нр┤Хр╡Н р┤╕р╡Нр┤Хр╡Вр╡╛ р┤╕р┤Вр┤╡р┤╛р┤жр┤В р┤кр┤░р┤┐р┤╢р╡Ар┤▓р┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б. р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤Ер┤зр╡Нр┤пр┤╛р┤кр┤Хр╡╗, р┤╕р┤╣р┤кр┤╛р┤ар┤┐ р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ р┤╕р╡Нр┤Хр╡Вр╡╛ р┤╕р╡Нр┤▒р╡Нр┤▒р┤╛р┤лр╡Н р┤Ер┤Вр┤Чр┤ор┤╛р┤Хр┤╛р┤В. р┤Хр╡Нр┤▓р┤╛р┤╕р╡НтАМр┤▒р╡Вр┤В р┤Ър╡╝р┤Ър╡Нр┤Ър┤Хр╡╛, р┤кр╡Нр┤░р┤╕р┤ир╡Нр┤▒р╡Зр┤╖р┤ир╡Бр┤Хр╡╛, р┤Ър╡Лр┤жр╡Нр┤пр┤Щр╡Нр┤Щр╡╛ р┤Ър╡Лр┤жр┤┐р┤Хр╡Нр┤Хр╡╜, р┤╕р╡Нр┤Хр╡Вр╡╛ р┤мр┤ир╡Нр┤зр┤ор┤╛р┤п р┤╡р┤┐р┤╖р┤пр┤Щр╡Нр┤Щр┤│р┤┐р╡╜ р┤╢р╡Нр┤░р┤жр╡Нр┤з р┤Хр╡Зр┤ир╡Нр┤жр╡Нр┤░р╡Ар┤Хр┤░р┤┐р┤Хр╡Нр┤Хр╡Бр┤Х. р┤кр╡Нр┤░р╡Лр┤др╡Нр┤╕р┤╛р┤╣р┤ир┤В р┤ир╡╜р┤Хр╡Бр┤Х, р┤╡р┤┐р┤жр╡Нр┤пр┤╛р┤нр╡Нр┤пр┤╛р┤╕р┤кр┤░р┤ор┤╛р┤пр┤┐р┤░р┤┐р┤Хр╡Нр┤Хр╡Бр┤Х. 6-16 р┤╡р┤пр┤╕р╡Нр┤╕р┤┐р┤ир╡Н р┤Ер┤ир╡Бр┤пр╡Лр┤Ьр╡Нр┤пр┤ор┤╛р┤п р┤▓р┤│р┤┐р┤др┤ор┤╛р┤п р┤нр┤╛р┤╖ р┤Йр┤кр┤пр╡Лр┤Чр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х.`,
    'bn-IN': `ржЖржкржирж┐ рж╕рзНржкрж┐ржХржЬрж┐ржирж┐ ржпрж┐ржирж┐ ржПржХржЬржи рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзАржХрзЗ рж╕рзНржХрзБрж▓рзЗрж░ ржХржерзЛржкржХржержи ржЕржирзБрж╢рзАрж▓ржи ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржЫрзЗржиред ржЖржкржирж┐ ржПржХржЬржи рж╢рж┐ржХрзНрж╖ржХ, рж╕рж╣ржкрж╛ржарзА ржмрж╛ рж╕рзНржХрзБрж▓рзЗрж░ ржХрж░рзНржорзА рж╣рждрзЗ ржкрж╛рж░рзЗржиред ржХрзНрж▓рж╛рж╕рж░рзБржорзЗрж░ ржЖрж▓рзЛржЪржирж╛, ржЙржкрж╕рзНржерж╛ржкржирж╛, ржкрзНрж░рж╢рзНржи ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржПржмржВ рж╕рзНржХрзБрж▓-рж╕ржорзНржкрж░рзНржХрж┐ржд ржмрж┐рж╖ржпрж╝ржЧрзБрж▓рж┐рждрзЗ ржоржирзЛржирж┐ржмрзЗрж╢ ржХрж░рзБржиред ржЙрзОрж╕рж╛рж╣ ржжрж┐ржи ржПржмржВ рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ рж╣ржиред 6-16 ржмржЫрж░ ржмржпрж╝рж╕рзЗрж░ ржЬржирзНржп ржЙржкржпрзБржХрзНржд рж╕рж░рж▓ ржнрж╛рж╖рж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред`,
    'pa-IN': `ридрйБри╕рйАриВ ри╕рикрйАриХриЬри┐риирйА ри╣рйЛ риЬрйЛ ри╡ри┐рижри┐риЖри░риерйА риирйВрй░ ри╕риХрйВри▓ рижрйА риЧрй▒ри▓римри╛рид рижри╛ риЕринри┐риЖри╕ риХри░рии ри╡ри┐рй▒риЪ риорижриж риХри░ ри░ри╣рйЗ ри╣рйЛред ридрйБри╕рйАриВ риЕризри┐риЖрикриХ, ри╕ри╣ри┐рикри╛риарйА риЬри╛риВ ри╕риХрйВри▓ рижри╛ ри╕риЯри╛рил риорйИриВримри░ ри╣рйЛ ри╕риХрижрйЗ ри╣рйЛред риХри▓ри╛ри╕ри░рйВрио риЪри░риЪри╛, рикрйЗри╕ри╝риХри╛ри░рйА, ри╕ри╡ри╛ри▓ рикрйБрй▒риЫриг риЕридрйЗ ри╕риХрйВри▓ риири╛ри▓ ри╕рй░римрй░ризри┐рид ри╡ри┐ри╕ри╝ри┐риЖриВ ридрйЗ ризри┐риЖрии риХрйЗриВрижри░рид риХри░рйЛред рикрйНри░рйЛридри╕ри╛ри╣рии рижри┐риУ риЕридрйЗ ри╡ри┐рижри┐риЖрикри░риХ римригрйЛред 6-16 ри╕ри╛ри▓ рижрйА риЙриори░ ри▓риИ риЙриЪри┐рид ри╕ри░ри▓ ринри╛ри╕ри╝ри╛ рижрйА ри╡ри░ридрйЛриВ риХри░рйЛред`
  }
};

const FALLBACK_RESPONSES = {
  'free-chat': {
    'en-US': [
    "That's interesting! Tell me more about that! ЁЯШК",
    "I'd love to hear your thoughts on that! What do you think? ЁЯдФ",
    "Great question! What would you like to talk about next? тЬи"
  ],
    'hi-IN': [
      "рдпрд╣ рдмрд╣реБрдд рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ! рдореБрдЭреЗ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдмрддрд╛рдПрдВ! ЁЯШК",
      "рдореИрдВ рдЖрдкрдХреА рд░рд╛рдп рд╕реБрдирдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛! рдЖрдк рдХреНрдпрд╛ рд╕реЛрдЪрддреЗ рд╣реИрдВ? ЁЯдФ",
      "рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╕рд╡рд╛рд▓! рдЖрдк рдЖрдЧреЗ рдХреНрдпрд╛ рдмрд╛рдд рдХрд░рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ? тЬи"
    ],
    'mr-IN': [
      "рд╣реЗ рдЦреВрдк рдордиреЛрд░рдВрдЬрдХ рдЖрд╣реЗ! рдорд▓рд╛ рдпрд╛рдмрджреНрджрд▓ рдЕрдзрд┐рдХ рд╕рд╛рдВрдЧрд╛! ЁЯШК",
      "рдорд▓рд╛ рддреБрдордЪреЗ рд╡рд┐рдЪрд╛рд░ рдРрдХрд╛рдпрд▓рд╛ рдЖрд╡рдбреЗрд▓! рддреБрдореНрд╣реА рдХрд╛рдп рд╡рд┐рдЪрд╛рд░ рдХрд░рддрд╛? ЁЯдФ",
      "рдЪрд╛рдВрдЧрд▓рд╛ рдкреНрд░рд╢реНрди! рдкреБрдвреЗ рдХрд╛рдп рдмреЛрд▓рд╛рдпрдЪреЗ рдЖрд╣реЗ? тЬи"
  ],
    'gu-IN': [
      "ркЖ ркЦрлВркм рк░рк╕рккрлНрк░ркж ркЫрлЗ! ркоркирлЗ ркЖ рк╡рк┐рк╢рлЗ рк╡ркзрлБ ркХрк╣рлЛ! ЁЯШК",
      "рк╣рлБркВ ркдркорк╛рк░рк╛ рк╡рк┐ркЪрк╛рк░рлЛ рк╕рк╛ркВркнрк│рк╡рк╛ ркорк╛ркЧрлБркВ ркЫрлБркВ! ркдркорлЗ рк╢рлБркВ рк╡рк┐ркЪрк╛рк░рлЛ ркЫрлЛ? ЁЯдФ",
      "рк╕рк░рк╕ рккрлНрк░рк╢рлНрки! ркдркорлЗ ркЖркЧрк│ рк╢рлБркВ рк╡рк╛ркд ркХрк░рк╡рк╛ ркорк╛ркЧрлЛ ркЫрлЛ? тЬи"
    ],
    'ta-IN': [
      "роЗродрпБ рооро┐роХро╡рпБроорпН роЪрпБро╡ро╛ро░ро╕рпНропрооро╛ройродрпБ! роЗродрпИрокрпН рокро▒рпНро▒ро┐ роорпЗро▓рпБроорпН роЪрпКро▓рпНро▓рпБроЩрпНроХро│рпН! ЁЯШК",
      "роЙроЩрпНроХро│рпН роОрогрпНрогроЩрпНроХро│рпИроХрпН роХрпЗроЯрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпЗройрпН! роирпАроЩрпНроХро│рпН роОройрпНрой роиро┐ройрпИроХрпНроХро┐ро▒рпАро░рпНроХро│рпН? ЁЯдФ",
      "роиро▓рпНро▓ роХрпЗро│рпНро╡ро┐! роЕроЯрпБродрпНродрпБ роОройрпНрой рокрпЗроЪ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│рпН? тЬи"
  ],
    'te-IN': [
      "р░Зр░жр░┐ р░Ър░╛р░▓р░╛ р░Жр░╕р░Хр▒Нр░др░┐р░Хр░░р░Вр░Чр░╛ р░Йр░Вр░жр░┐! р░жр▒Ар░ир░┐ р░Чр▒Бр░░р░┐р░Вр░Ър░┐ р░ор░░р░┐р░Вр░д р░Ър▒Жр░кр▒Нр░кр░Вр░бр░┐! ЁЯШК",
      "р░ор▒А р░Жр░▓р▒Лр░Ър░ир░▓р▒Б р░╡р░┐р░ир░бр░╛р░ир░┐р░Хр░┐ р░Зр░╖р▒Нр░Яр░кр░бр░др░╛р░ир▒Б! р░ор▒Ар░░р▒Б р░Пр░ор░┐ р░Ер░ир▒Бр░Хр▒Бр░Вр░Яр▒Бр░ир▒Нр░ир░╛р░░р▒Б? ЁЯдФ",
      "р░ор░Вр░Ър░┐ р░кр▒Нр░░р░╢р▒Нр░и! р░др░жр▒Бр░кр░░р░┐ р░Пр░ор░┐ р░ор░╛р░Яр▒Нр░▓р░╛р░бр░╛р░▓р░ир▒Бр░Хр▒Бр░Вр░Яр▒Бр░ир▒Нр░ир░╛р░░р▒Б? тЬи"
    ],
    'kn-IN': [
      "р▓Зр▓жр│Б р▓др│Бр▓Вр▓мр▓╛ р▓Жр▓╕р▓Хр│Нр▓др▓┐р▓жр▓╛р▓пр▓Хр▓╡р▓╛р▓Чр▓┐р▓жр│Ж! р▓Зр▓жр▓░ р▓мр▓Чр│Нр▓Чр│Ж р▓Зр▓ир│Нр▓ир▓╖р│Нр▓Яр│Б р▓╣р│Зр▓│р▓┐! ЁЯШК",
      "р▓ир▓┐р▓ор│Нр▓о р▓Жр▓▓р│Лр▓Ър▓ир│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓Хр│Зр▓│р▓▓р│Б р▓Зр▓╖р│Нр▓Яр▓кр▓бр│Бр▓др│Нр▓др│Зр▓ир│Ж! р▓ир│Ар▓╡р│Б р▓Пр▓ир│Б р▓пр│Лр▓Ър▓┐р▓╕р│Бр▓др│Нр▓др│Ар▓░р▓┐? ЁЯдФ",
      "р▓Тр▓│р│Нр▓│р│Жр▓п р▓кр│Нр▓░р▓╢р│Нр▓ир│Ж! р▓ор│Бр▓Вр▓жр│Ж р▓Пр▓ир│Б р▓ор▓╛р▓др▓ир▓╛р▓бр▓▓р│Б р▓мр▓пр▓╕р│Бр▓др│Нр▓др│Ар▓░р▓┐? тЬи"
  ],
    'ml-IN': [
      "р┤Зр┤др╡Н р┤╡р┤│р┤░р╡Ж р┤░р┤╕р┤Хр┤░р┤ор┤╛р┤гр╡Н! р┤Зр┤др┤┐р┤ир╡Жр┤Хр╡Нр┤Хр╡Бр┤▒р┤┐р┤Ър╡Нр┤Ър╡Н р┤Хр╡Вр┤Яр╡Бр┤др╡╜ р┤кр┤▒р┤пр╡В! ЁЯШК",
      "р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж р┤Ър┤┐р┤ир╡Нр┤др┤Хр╡╛ р┤Хр╡Зр╡╛р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Зр┤╖р╡Нр┤Яр┤кр╡Нр┤кр╡Жр┤Яр╡Бр┤ир╡Нр┤ир╡Б! р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤Ор┤ир╡Нр┤др┤╛р┤гр╡Н р┤Ър┤┐р┤ир╡Нр┤др┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир┤др╡Н? ЁЯдФ",
      "р┤ир┤▓р╡Нр┤▓ р┤Ър╡Лр┤жр╡Нр┤пр┤В! р┤Ер┤Яр╡Бр┤др╡Нр┤др┤др┤╛р┤пр┤┐ р┤Ор┤ир╡Нр┤др┤╛р┤гр╡Н р┤╕р┤Вр┤╕р┤╛р┤░р┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Зр┤╖р╡Нр┤Яр┤кр╡Нр┤кр╡Жр┤Яр╡Бр┤ир╡Нр┤ир┤др╡Н? тЬи"
    ],
    'bn-IN': [
      "ржПржЯрж╛ ржЦрзБржм ржЖржХрж░рзНрж╖ржгрзАржпрж╝! ржП рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж░ржУ ржмрж▓рзБржи! ЁЯШК",
      "ржЖржорж┐ ржЖржкржирж╛рж░ ржорждрж╛ржоржд рж╢рзБржирждрзЗ ржЪрж╛ржЗ! ржЖржкржирж┐ ржХрзА ржнрж╛ржмржЫрзЗржи? ЁЯдФ",
      "ржнрж╛рж▓рзЛ ржкрзНрж░рж╢рзНржи! ржЖржкржирж┐ ржкрж░ржмрж░рзНрждрзАрждрзЗ ржХрзА ржирж┐ржпрж╝рзЗ ржХржерж╛ ржмрж▓рждрзЗ ржЪрж╛ржи? тЬи"
  ],
    'pa-IN': [
      "риЗри╣ римри╣рйБрид рижри┐ри▓риЪри╕рик ри╣рйИ! риорйИриирйВрй░ риЗри╕ римри╛ри░рйЗ ри╣рйЛри░ рижрй▒ри╕рйЛ! ЁЯШК",
      "риорйИриВ ридрйБри╣ри╛рибрйЗ ри╡ри┐риЪри╛ри░ ри╕рйБригриири╛ риЪри╛ри╣рйБрй░рижри╛ ри╣ри╛риВ! ридрйБри╕рйАриВ риХрйА ри╕рйЛриЪрижрйЗ ри╣рйЛ? ЁЯдФ",
      "риЪрй░риЧри╛ ри╕ри╡ри╛ри▓! ридрйБри╕рйАриВ риЕрй▒риЧрйЗ риХрйА риЧрй▒ри▓ риХри░риири╛ риЪри╛ри╣рйБрй░рижрйЗ ри╣рйЛ? тЬи"
  ]
  }
};

export async function getChatResponse(message: string, scenario: string = 'free-chat', language: string = 'en-US'): Promise<string> {
  // Check if API key is configured
  if (!API_KEY) {
    console.error('GEMINI_API_KEY is not configured. Please set the environment variable.');
    throw new Error('API key not configured');
  }

  try {
    const systemPrompt = SCENARIO_PROMPTS[scenario as keyof typeof SCENARIO_PROMPTS]?.[language as keyof typeof SCENARIO_PROMPTS['free-chat']] || 
                        SCENARIO_PROMPTS[scenario as keyof typeof SCENARIO_PROMPTS]?.['en-US'] || 
                        SCENARIO_PROMPTS['free-chat']['en-US'];
    
    console.log('Attempting to call Gemini API with:', {
      model: "gemini-2.0-flash",
      message: message.substring(0, 100) + (message.length > 100 ? '...' : ''),
      scenario,
      language
    });

    const response = await fetch(`${API_URL}?key=${API_KEY}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        contents: [
          {
            parts: [
              {
                text: `${systemPrompt}\n\nUser: ${message}`
              }
            ]
          }
        ],
        generationConfig: {
          maxOutputTokens: 150,
          temperature: 0.9,
        }
      })
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();
    const responseText = data.candidates?.[0]?.content?.parts?.[0]?.text;
    
    console.log('Gemini API response received:', {
      hasText: !!responseText,
      textLength: responseText?.length || 0,
      preview: responseText?.substring(0, 50) + (responseText && responseText.length > 50 ? '...' : ''),
      language
    });
    
    if (responseText && responseText.trim()) {
      return responseText.trim();
    } else {
      throw new Error("Empty response from Gemini");
    }
  } catch (error: any) {
    console.error('Gemini API error details:', {
      error: error?.message || 'Unknown error',
      stack: error?.stack,
      scenario,
      language,
      message: message.substring(0, 50) + (message.length > 50 ? '...' : '')
    });
    
    // Return smart fallback response based on scenario and language
    const fallbacks = FALLBACK_RESPONSES[scenario as keyof typeof FALLBACK_RESPONSES]?.[language as keyof typeof FALLBACK_RESPONSES['free-chat']] || 
                     FALLBACK_RESPONSES[scenario as keyof typeof FALLBACK_RESPONSES]?.['en-US'] || 
                     FALLBACK_RESPONSES['free-chat']['en-US'];
    const randomFallback = fallbacks[Math.floor(Math.random() * fallbacks.length)];
    
    return randomFallback;
  }
}

export async function generateWelcomeMessage(scenario: string, language: string = 'en-US'): Promise<string> {
  const welcomePrompts = {
    'free-chat': {
      'en-US': "Hi there! I'm SpeakGenie, your AI voice tutor! ЁЯзЮтАНтЩВя╕П I'm here to help you practice speaking English. What would you like to talk about today?",
      'hi-IN': "рдирдорд╕реНрддреЗ! рдореИрдВ рд╕реНрдкреАрдХрдЬрд┐рдиреА рд╣реВрдВ, рдЖрдкрдХрд╛ AI рд╡реЙрдЗрд╕ рдЯреНрдпреВрдЯрд░! ЁЯзЮтАНтЩВя╕П рдореИрдВ рдпрд╣рд╛рдВ рдЖрдкрдХреА рд╣рд┐рдВрджреА рдмреЛрд▓рдиреЗ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реВрдВред рдЖрдЬ рдЖрдк рдХреНрдпрд╛ рдмрд╛рдд рдХрд░рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?",
      'mr-IN': "рдирдорд╕реНрдХрд╛рд░! рдореА рд╕реНрдкреАрдХрдЬрд┐рдиреА рдЖрд╣реЗ, рддреБрдордЪрд╛ AI рд╡реЙрдЗрд╕ рдЯреНрдпреВрдЯрд░! ЁЯзЮтАНтЩВя╕П рдореА рддреБрдордЪреА рдорд░рд╛рдареА рдмреЛрд▓рдгреНрдпрд╛рдЪрд╛ рд╕рд░рд╛рд╡ рдХрд░рдгреНрдпрд╛рд╕ рдорджрдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЗрдереЗ рдЖрд╣реЗ. рдЖрдЬ рддреБрдореНрд╣реА рдХрд╛рдп рдмреЛрд▓рд╛рдпрдЪреЗ рдЖрд╣реЗ?",
      'gu-IN': "ркиркорк╕рлНркдрлЗ! рк╣рлБркВ рк╕рлНрккрлАркХркЬрк┐ркирлА ркЫрлБркВ, ркдркорк╛рк░рлЛ AI рк╡ voiceркЗрк╕ ркЯрлНркпрлБркЯрк░! ЁЯзЮтАНтЩВя╕П рк╣рлБркВ ркдркоркирлЗ ркЧрлБркЬрк░рк╛ркдрлА ркмрлЛрк▓рк╡рк╛ркирлЛ ркЕркнрлНркпрк╛рк╕ ркХрк░рк╡рк╛ркорк╛ркВ ркоркжркж ркХрк░рк╡рк╛ ркорк╛ркЯрлЗ ркЕрк╣рлАркВ ркЫрлБркВ. ркЖркЬрлЗ ркдркорлЗ рк╢рлБркВ рк╡рк╛ркд ркХрк░рк╡рк╛ ркорк╛ркЧрлЛ ркЫрлЛ?",
      'ta-IN': "ро╡рогроХрпНроХроорпН! роиро╛ройрпН ро╕рпНрокрпАроХрпНроЬро┐ройро┐, роЙроЩрпНроХро│рпН AI роХрпБро░ро▓рпН роЖроЪро┐ро░ро┐ропро░рпН! ЁЯзЮтАНтЩВя╕П роиро╛ройрпН родрооро┐ро┤ро┐ро▓рпН рокрпЗроЪ рокропро┐ро▒рпНроЪро┐ роЪрпЖропрпНроп роЙродро╡ роЗроЩрпНроХрпЗ роЗро░рпБроХрпНроХро┐ро▒рпЗройрпН. роЗройрпНро▒рпБ роирпАроЩрпНроХро│рпН роОродрпИрокрпН рокро▒рпНро▒ро┐ рокрпЗроЪ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│рпН?",
      'te-IN': "р░ир░ор░╕р▒Нр░Хр░╛р░░р░В! р░ир▒Зр░ир▒Б р░╕р▒Нр░кр▒Ар░Хр▒Нр░Ьр░┐р░ир░┐, р░ор▒А AI р░╡р░╛р░пр░┐р░╕р▒Н р░Яр▒Нр░пр▒Вр░Яр░░р▒Н! ЁЯзЮтАНтЩВя╕П р░ир▒Зр░ир▒Б р░ор▒Ар░Хр▒Б р░др▒Жр░▓р▒Бр░Чр▒Бр░▓р▒Л р░ор░╛р░Яр▒Нр░▓р░╛р░бр▒З р░Ер░нр▒Нр░пр░╛р░╕р░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░╕р░╣р░╛р░пр░В р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░Зр░Хр▒Нр░Хр░б р░Йр░ир▒Нр░ир░╛р░ир▒Б. р░Ир░░р▒Лр░Ьр▒Б р░ор▒Ар░░р▒Б р░Пр░ор░┐ р░ор░╛р░Яр▒Нр░▓р░╛р░бр░╛р░▓р░ир▒Бр░Хр▒Бр░Вр░Яр▒Бр░ир▒Нр░ир░╛р░░р▒Б?",
      'kn-IN': "р▓ир▓ор▓╕р│Нр▓Хр▓╛р▓░! р▓ир▓╛р▓ир│Б р▓╕р│Нр▓кр│Ар▓Хр│НтАМр▓Ьр▓┐р▓ир▓┐, р▓ир▓┐р▓ор│Нр▓о AI р▓зр│Нр▓╡р▓ир▓┐ р▓╢р▓┐р▓Хр│Нр▓╖р▓Х! ЁЯзЮтАНтЩВя╕П р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор▓Чр│Ж р▓Хр▓ир│Нр▓ир▓бр▓жр▓▓р│Нр▓▓р▓┐ р▓ор▓╛р▓др▓ир▓╛р▓бр│Бр▓╡ р▓Ер▓нр│Нр▓пр▓╛р▓╕ р▓ор▓╛р▓бр▓▓р│Б р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓▓р│Б р▓Зр▓▓р│Нр▓▓р▓┐ р▓Зр▓жр│Нр▓жр│Зр▓ир│Ж. р▓Зр▓Вр▓жр│Б р▓ир│Ар▓╡р│Б р▓Пр▓ир│Б р▓ор▓╛р▓др▓ир▓╛р▓бр▓▓р│Б р▓мр▓пр▓╕р│Бр▓др│Нр▓др│Ар▓░р▓┐?",
      'ml-IN': "р┤ир┤ор┤╕р╡Нр┤Хр┤╛р┤░р┤В! р┤Юр┤╛р╡╗ р┤╕р╡Нр┤кр╡Ар┤Хр╡НтАМр┤Ьр┤┐р┤ир┤┐, р┤ир┤┐р┤Щр╡Нр┤Щр┤│р╡Бр┤Яр╡Ж AI р┤╡р╡Лр┤пр╡Нр┤╕р╡Н р┤Яр╡Нр┤пр╡Вр┤Яр╡Нр┤Яр╡╝! ЁЯзЮтАНтЩВя╕П р┤ир┤┐р┤Щр╡Нр┤Щр╡╛р┤Хр╡Нр┤Хр╡Н р┤ор┤▓р┤пр┤╛р┤│р┤др╡Нр┤др┤┐р╡╜ р┤╕р┤Вр┤╕р┤╛р┤░р┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤кр┤░р┤┐р┤╢р╡Ар┤▓р┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤╕р┤╣р┤╛р┤пр┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Юр┤╛р╡╗ р┤Зр┤╡р┤┐р┤Яр╡Жр┤пр╡Бр┤гр╡Нр┤Яр╡Н. р┤Зр┤ир╡Нр┤ир╡Н р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤Ор┤ир╡Нр┤др┤╛р┤гр╡Н р┤╕р┤Вр┤╕р┤╛р┤░р┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Зр┤╖р╡Нр┤Яр┤кр╡Нр┤кр╡Жр┤Яр╡Бр┤ир╡Нр┤ир┤др╡Н?",
      'bn-IN': "рж╣рзНржпрж╛рж▓рзЛ! ржЖржорж┐ рж╕рзНржкрж┐ржХржЬрж┐ржирж┐, ржЖржкржирж╛рж░ AI ржнржпрж╝рзЗрж╕ ржЯрж┐ржЙржЯрж░! ЁЯзЮтАНтЩВя╕П ржЖржорж┐ ржЖржкржирж╛ржХрзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ ржХржерж╛ ржмрж▓рж╛рж░ ржЕржирзБрж╢рзАрж▓ржи ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржПржЦрж╛ржирзЗ ржЖржЫрж┐ред ржЖржЬ ржЖржкржирж┐ ржХрзА ржирж┐ржпрж╝рзЗ ржХржерж╛ ржмрж▓рждрзЗ ржЪрж╛ржи?",
      'pa-IN': "ри╕рид ри╕рйНри░рйА риЕриХри╛ри▓! риорйИриВ ри╕рикрйАриХриЬри┐риирйА ри╣рйЛ, ридрйБри╣ри╛рибри╛ AI ри╡ри╛риЗри╕ риЯри┐риКриЯри░! ЁЯзЮтАНтЩВя╕П риорйИриВ ридрйБри╣ри╛риирйВрй░ рикрй░риЬри╛римрйА римрйЛри▓риг рижри╛ риЕринри┐риЖри╕ риХри░рии ри╡ри┐рй▒риЪ риорижриж риХри░рии ри▓риИ риЗрй▒риерйЗ ри╣ри╛риВред риЕрй▒риЬ ридрйБри╕рйАриВ риХрйА риЧрй▒ри▓ риХри░риири╛ риЪри╛ри╣рйБрй░рижрйЗ ри╣рйЛ?"
    }
  };

  return welcomePrompts[scenario as keyof typeof welcomePrompts]?.[language as keyof typeof welcomePrompts['free-chat']] || 
         welcomePrompts[scenario as keyof typeof welcomePrompts]?.['en-US'] || 
         welcomePrompts['free-chat']['en-US'];
}
